(this.webpackJsonp=this.webpackJsonp||[]).push([["valantic-oci"],{"9CZf":function(e){e.exports=JSON.parse('{"valantic-oci":{"general":{"mainMenuItemGeneral":"Valantic OCI","descriptionTextModule":"Manage the OCI integration here"},"list":{"createButton":"New OCI user","labelCompany":"Company"},"createForm":{"labelName":"Username","placeholderName":"Username","labelPassword":"Password","placeholderPassword":"Password","labelNewPassword":"New password","placeholderNewPassword":"Enter new password...","labelNewPasswordConfirm":"Confirm password","placeholderNewPasswordConfirm":"Re-enter new password...","labelCustomer":"Customer","placeholderCustomer":"Customer","labelActive":"Active","buttonSave":"Save","messageSaveError":"OCI user could not be saved."}}}')},BYBO:function(e,t){e.exports='{% block valantic_oci_users_list_page %}\n    <sw-page class="valantic-oci-users-list">\n        <template slot="smart-bar-actions">\n            <sw-button variant="primary" :router-link="{ name: \'valantic.oci.users_create\' }">\n                {{ $tc(\'valantic-oci.list.createButton\') }}\n            </sw-button>\n        </template>\n        <template slot="content">\n            <sw-entity-listing\n                v-if="ociUsers"\n                :items="ociUsers"\n                :repository="repository"\n                :showSelection="false"\n                :columns="columns"\n                detailRoute="valantic.oci.users_edit"\n            >\n                <template #column-customer="{ item }">\n                    {{ item.customer.firstName}} {{ item.customer.lastName  }}\n                </template>\n            </sw-entity-listing>\n        </template>\n    </sw-page>\n{% endblock %}\n'},KlYn:function(e,t,r){"use strict";r.r(t);var n=r("Yyfr"),a=r("9CZf"),i=r("BYBO"),s=r.n(i),o=Shopware.Data.Criteria;Shopware.Component.register("valantic-oci-users-list",{template:s.a,inject:["repositoryFactory"],data:function(){return{repository:null,ociUsers:null}},metaInfo:function(){return{title:this.$createTitle()}},created:function(){var e=this;this.repository=this.repositoryFactory.create("oci_user");var t=new o;t.addAssociation("customer"),this.repository.search(t,Shopware.Context.api).then((function(t){e.ociUsers=t}))},computed:{columns:function(){return[{property:"customer",dataIndex:"customer.lastName,customer.firstName",label:this.$tc("valantic-oci.createForm.labelCustomer"),allowResize:!0},{property:"customer.company",label:this.$tc("valantic-oci.list.labelCompany"),allowResize:!0},{property:"name",label:this.$tc("valantic-oci.createForm.labelName"),routerLink:"valantic.oci.users_edit",inlineEdit:"string",allowResize:!0,primary:!0},{property:"active",label:this.$tc("valantic-oci.createForm.labelActive"),inlineEdit:"boolean",allowResize:!0}]}}});var c=r("UnkM"),l=r.n(c);function u(e,t,r,n,a,i,s){try{var o=e[i](s),c=o.value}catch(e){return void r(e)}o.done?t(c):Promise.resolve(c).then(n,a)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){u(i,n,a,s,o,"next",e)}function o(e){u(i,n,a,s,o,"throw",e)}s(void 0)}))}}var m=Shopware,d=m.Component,w=m.Mixin;d.register("valantic-oci-users-create",{template:l.a,inject:["repositoryFactory"],mixins:[w.getByName("notification")],data:function(){return{ociUser:null,processSuccess:!1,isLoading:!1,repository:null,newUser:!0}},created:function(){this.repository=this.repositoryFactory.create("oci_user"),this.getOciUser()},metaInfo:function(){return{title:this.$createTitle()}},methods:{getOciUser:function(){this.ociUser=this.repository.create(Shopware.Context.api)},saveFinish:function(){this.processSuccess=!1},onSave:function(){var e=this;return p(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.validPassword(e.ociUser);case 3:if(t.sent){t.next=6;break}return e.isLoading=!1,t.abrupt("return",!1);case 6:e.repository.save(e.ociUser,Shopware.Context.api).then((function(){e.isLoading=!1,e.$router.push({name:"valantic.oci.users_edit",params:{id:e.ociUser.id}})})).catch((function(){e.createNotificationError({message:e.$tc("valantic-oci.createForm.messageSaveError")}),e.isLoading=!1}));case 7:case"end":return t.stop()}}),t)})))()},validPassword:function(e){var t=this;return p(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.password,a=e.passwordConfirm,i=n!==a,!(n||a)){r.next=7;break}if(!i){r.next=7;break}return t.createNotificationError({message:t.$tc("sw-customer.detail.notificationPasswordErrorMessage")}),r.abrupt("return",!1);case 7:return r.abrupt("return",!0);case 8:case"end":return r.stop()}}),r)})))()}}});r("d5F0");Shopware.Module.register("valantic-oci",{type:"plugin",name:"Valantic OCI Integration",title:"valantic-oci.general.mainMenuItemGeneral",description:"valantic-oci.general.descriptionTextModule",color:"#ff4b4b",icon:"default-view-split",settingsItem:{group:"shop",to:"valantic.oci.settings",icon:"default-view-split"},navigation:[{label:"OCI Users",color:"#ff4b4b",path:"valantic.oci.users_list",icon:"default-view-split",parent:"sw-customer",position:100}],snippets:{"de-DE":n,"en-GB":a},routes:{users_list:{component:"valantic-oci-users-list",path:"users/list"},users_edit:{component:"valantic-oci-users-edit",path:"users/edit/:id",meta:{parentPath:"valantic.oci.users_list"}},users_create:{component:"valantic-oci-users-create",path:"users/create",meta:{parentPath:"valantic.oci.users_list"}}}})},UnkM:function(e,t){e.exports='{% block valantic_oci_users_create_page %}\n    <sw-page class="valantic-oci-users-create">\n        <template slot="smart-bar-actions">\n            <sw-button-process\n                class="valantic-oci-users-create__save-action"\n                :is-loading="isLoading"\n                :disabled="isLoading"\n                :process-success="processSuccess"\n                variant="primary"\n                @process-finish="saveFinish"\n                @click.prevent="onSave"\n            >\n                {{ $tc(\'valantic-oci.createForm.buttonSave\') }}\n            </sw-button-process>\n        </template>\n        <template slot="content">\n            <sw-card-view>\n                <sw-card v-if="ociUser" :isLoading="isLoading">\n                    <sw-checkbox-field\n                            :value="newUser"\n                            v-model="ociUser.active"\n                            :label="$tc(\'valantic-oci.createForm.labelActive\')"\n                    />\n                    <sw-text-field\n                        v-model="ociUser.name"\n                        required\n                        :label="$tc(\'valantic-oci.createForm.labelName\')"\n                        :placeholder="$tc(\'valantic-oci.createForm.placeholderName\')"\n                    />\n                    <sw-password-field\n                        v-if="newUser"\n                        v-model="ociUser.password"\n                        required\n                        :label="$tc(\'valantic-oci.createForm.labelPassword\')"\n                        :placeholder="$tc(\'valantic-oci.createForm.placeholderPassword\')"\n                    />\n                    <sw-password-field\n                        v-if="!newUser"\n                        v-model="ociUser.passwordNew"\n                        autocomplete="off"\n                        :label="$tc(\'valantic-oci.createForm.labelNewPassword\')"\n                        :placeholder="$tc(\'valantic-oci.createForm.placeholderNewPassword\')"\n                    />\n                    <sw-password-field\n                        v-model="ociUser.passwordConfirm"\n                        autocomplete="off"\n                        :label="$tc(\'sw-profile.index.labelNewPasswordConfirm\')"\n                        :placeholder="$tc(\'valantic-oci.createForm.placeholderNewPasswordConfirm\')"\n                    />\n                    <sw-entity-single-select\n                        v-model="ociUser.customerId"\n                        entity="customer"\n                        required\n                        :label="$tc(\'valantic-oci.createForm.labelCustomer\')"\n                        :placeholder="$tc(\'valantic-oci.createForm.placeholderCustomer\')"\n                    >\n                        <template #result-item="{ item, index }">\n                            <slot name="result-item" v-bind="{ item, index }">\n                                <li is="sw-select-result" v-bind="{ item, index }">\n                                    {{ item.firstName }} {{ item.lastName }} {% if item.company %}({{ item.company }}){% endif %}\n                                </li>\n                            </slot>\n                        </template>\n                        <template #selection-label-property="{ item, index }">\n                            <slot name="selection-label-property" v-bind="{ item, index }">\n                                {{ item.firstName }} {{ item.lastName }} {% if item.company %}({{ item.company }}){% endif %}\n                            </slot>\n                        </template>\n                    </sw-entity-single-select>\n                </sw-card>\n            </sw-card-view>\n        </template>\n    </sw-page>\n{% endblock %}\n'},Yyfr:function(e){e.exports=JSON.parse('{"valantic-oci":{"general":{"mainMenuItemGeneral":"Valantic OCI","descriptionTextModule":"Verwalten Sie hier die Einstellungen der OCI-Anbindung"},"list":{"createButton":"Neuer OCI-Nutzer","labelCompany":"Firma"},"createForm":{"labelName":"Benutzername","placeholderName":"Benutzername","labelPassword":"Passwort","placeholderPassword":"Passwort","labelNewPassword":"Neues passwort","placeholderNewPassword":"Neues Passwort eingeben...","labelNewPasswordConfirm":"Passwort best√§tigen","placeholderNewPasswordConfirm":"Neues Passwort erneut eingeben...","labelCustomer":"Kunde","placeholderCustomer":"Kunde","labelActive":"Aktiv","buttonSave":"Speichern","messageSaveError":"OCI-Nutzer konnte nicht gespeichert werden."}}}')},d5F0:function(e,t){function r(e,t,r,n,a,i,s){try{var o=e[i](s),c=o.value}catch(e){return void r(e)}o.done?t(c):Promise.resolve(c).then(n,a)}Shopware.Component.extend("valantic-oci-users-edit","valantic-oci-users-create",{methods:{getOciUser:function(){var e=this;this.newUser=!1,this.repository.get(this.$route.params.id,Shopware.Context.api).then((function(t){e.ociUser=t}))},onSave:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoading=!0,!t.ociUser.passwordNew){e.next=8;break}return t.ociUser.password=t.ociUser.passwordNew,e.next=5,t.validPassword(t.ociUser);case 5:if(e.sent){e.next=8;break}return t.isLoading=!1,e.abrupt("return",!1);case 8:t.repository.save(t.ociUser,Shopware.Context.api).then((function(){t.getOciUser(),t.isLoading=!1,t.processSuccess=!0})).catch((function(e){t.isLoading=!1,t.createNotificationError({title:t.$tc("swag-ociUser.detail.errorTitle"),message:e})}));case 9:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function o(e){r(s,a,i,o,c,"next",e)}function c(e){r(s,a,i,o,c,"throw",e)}o(void 0)}))})()}}})}},[["KlYn","runtime"]]]);